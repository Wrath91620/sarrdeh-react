{"ast":null,"code":"import { Texture } from '../core/Texture.js';\nexport class Texture3D extends Texture {\n  constructor(gl, args) {\n    super(gl, {\n      ...args,\n      target: gl.TEXTURE_3D,\n      width: args.width ? args.width : 2,\n      height: args.height ? args.height : 2\n    });\n    const image = new Image();\n    image.crossOrigin = '*';\n    image.src = args.src;\n    image.onload = () => {\n      let canvas = document.createElement('canvas');\n      canvas.width = image.width;\n      canvas.height = image.height;\n      let ctx = canvas.getContext('2d');\n      ctx.scale(1, -1);\n      ctx.translate(0, -image.height);\n      ctx.drawImage(image, 0, 0);\n      const imageData = ctx.getImageData(0, 0, image.width, image.height).data;\n      canvas = null;\n      ctx = null;\n      let elementCount;\n      switch (this.format) {\n        case gl.RED:\n          elementCount = 1;\n          break;\n        case gl.RG:\n          elementCount = 2;\n          break;\n        case gl.RGB:\n          elementCount = 3;\n          break;\n        default:\n          elementCount = 4;\n          break;\n      }\n      const dataCount = this.width * this.height * this.length * elementCount;\n      const data = this.type === gl.UNSIGNED_BYTE ? new Uint8Array(dataCount) : new Float32Array(dataCount);\n      let dataIterator = 0;\n      for (let z = 0; z < this.length; z++) {\n        for (let y = 0; y < this.height; y++) {\n          for (let x = 0; x < this.width; x++) {\n            let zOffsetX = z % args.tileCountX * this.width;\n            let zOffsetY = Math.floor(z / args.tileCountX) * (this.width * this.height * args.tileCountX);\n            let index = x + zOffsetX + (y * image.width + zOffsetY);\n            const r = imageData[index * 4];\n            const g = imageData[index * 4 + 1];\n            const b = imageData[index * 4 + 2];\n            const a = imageData[index * 4 + 3];\n            let texel = [r, g, b, a];\n            for (let i = 0; i < elementCount; i++) {\n              if (this.type === this.gl.UNSIGNED_BYTE) {\n                data[dataIterator++] = texel[i];\n              } else {\n                data[dataIterator++] = texel[i] / 255;\n              }\n            }\n          }\n        }\n      }\n      this.image = data;\n      this.needsUpdate = true;\n    };\n  }\n}","map":{"version":3,"names":["Texture","Texture3D","constructor","gl","args","target","TEXTURE_3D","width","height","image","Image","crossOrigin","src","onload","canvas","document","createElement","ctx","getContext","scale","translate","drawImage","imageData","getImageData","data","elementCount","format","RED","RG","RGB","dataCount","length","type","UNSIGNED_BYTE","Uint8Array","Float32Array","dataIterator","z","y","x","zOffsetX","tileCountX","zOffsetY","Math","floor","index","r","g","b","a","texel","i","needsUpdate"],"sources":["C:/Users/Sarrdeh Tech/Desktop/Sarrdeh-React/sarrdeh-react/node_modules/ogl/src/extras/Texture3D.js"],"sourcesContent":["import { Texture } from '../core/Texture.js';\r\n\r\nexport class Texture3D extends Texture {\r\n    constructor(gl, args) {\r\n        super(gl, {\r\n            ...args,\r\n            target: gl.TEXTURE_3D,\r\n            width: args.width ? args.width : 2,\r\n            height: args.height ? args.height : 2,\r\n        });\r\n\r\n        const image = new Image();\r\n        image.crossOrigin = '*';\r\n        image.src = args.src;\r\n\r\n        image.onload = () => {\r\n            let canvas = document.createElement('canvas');\r\n            canvas.width = image.width;\r\n            canvas.height = image.height;\r\n\r\n            let ctx = canvas.getContext('2d');\r\n            ctx.scale(1, -1);\r\n            ctx.translate(0, -image.height);\r\n            ctx.drawImage(image, 0, 0);\r\n            const imageData = ctx.getImageData(0, 0, image.width, image.height).data;\r\n\r\n            canvas = null;\r\n            ctx = null;\r\n            let elementCount;\r\n\r\n            switch (this.format) {\r\n                case gl.RED:\r\n                    elementCount = 1;\r\n                    break;\r\n                case gl.RG:\r\n                    elementCount = 2;\r\n                    break;\r\n                case gl.RGB:\r\n                    elementCount = 3;\r\n                    break;\r\n                default:\r\n                    elementCount = 4;\r\n                    break;\r\n            }\r\n\r\n            const dataCount = this.width * this.height * this.length * elementCount;\r\n            const data = this.type === gl.UNSIGNED_BYTE ? new Uint8Array(dataCount) : new Float32Array(dataCount);\r\n\r\n            let dataIterator = 0;\r\n\r\n            for (let z = 0; z < this.length; z++) {\r\n                for (let y = 0; y < this.height; y++) {\r\n                    for (let x = 0; x < this.width; x++) {\r\n                        let zOffsetX = (z % args.tileCountX) * this.width;\r\n                        let zOffsetY = Math.floor(z / args.tileCountX) * (this.width * this.height * args.tileCountX);\r\n                        let index = x + zOffsetX + (y * image.width + zOffsetY);\r\n\r\n                        const r = imageData[index * 4];\r\n                        const g = imageData[index * 4 + 1];\r\n                        const b = imageData[index * 4 + 2];\r\n                        const a = imageData[index * 4 + 3];\r\n\r\n                        let texel = [r, g, b, a];\r\n\r\n                        for (let i = 0; i < elementCount; i++) {\r\n                            if (this.type === this.gl.UNSIGNED_BYTE) {\r\n                                data[dataIterator++] = texel[i];\r\n                            } else {\r\n                                data[dataIterator++] = texel[i] / 255;\r\n                            }\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n\r\n            this.image = data;\r\n            this.needsUpdate = true;\r\n        };\r\n    }\r\n}\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}